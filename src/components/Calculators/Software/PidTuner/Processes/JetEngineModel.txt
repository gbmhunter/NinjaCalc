var process = {  

    getDefaults: function () {
        return {
            pidConfig: {
                constants: {
                    p: {
                        min: 0.0,
                        max: 0.001,
                        value: 0.0006
                    },
                    i: {
                        min: 0.0,
                        max: 0.001,
                        value: 0.0006
                    },
                    d: {
                        min: 0.0,
                        max: 0.001,
                        value: 0.0
                    }
                },
                integralLimitMode: 'Output Limited',
            }
        }
    },

    init: function() {  
        console.log('plant.init() called.')           
        this.fuelConstant = 10000.0
        this.dragConstant = -1.0
        this.maxAccel_radPss = 10000.0
        this.rotVel_radPs = 0.0

        this.lastUpdateTime_s = 0.0
    },

    // This gets called every simulation tick, with a new control variable. This function
    // needs to update the process, and return the new measured variable.
    update: function (fuelFlow_lPmin, timeStep_s) {
        // console.log('JetEngineModel.update() called with fuelFlow_lPmin = ' + fuelFlow_lPmin + ', timeStep_s = ' + timeStep_s + '.')        

        // Ffuel - Fdrag = ma
        let rotAccel_radPss = this.fuelConstant*fuelFlow_lPmin + this.dragConstant*Math.pow(this.rotVel_radPs, 1)
        // console.log('rotAccel_radPss = ' + rotAccel_radPss)

        if(rotAccel_radPss > this.maxAccel_radPss)
            rotAccel_radPss = this.maxAccel_radPss
        else if(rotAccel_radPss < -this.maxAccel_radPss)
            rotAccel_radPss = -this.maxAccel_radPss
        
        let changeInRotVel_radPs = rotAccel_radPss * timeStep_s
        // console.log('changeInRotVel = ' + changeInRotVel)

        this.rotVel_radPs = this.rotVel_radPs + changeInRotVel_radPs        
    },

    getRotVel_radPs: function () {
        return this.rotVel_radPs
    }
 }

 // Provide an expression to return the object above to
 // the eval() function
 process
