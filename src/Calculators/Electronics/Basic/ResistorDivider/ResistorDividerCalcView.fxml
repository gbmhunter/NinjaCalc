<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.RadioButton?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.TitledPane?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.RowConstraints?>

<?import javafx.scene.layout.VBox?>

<?import javafx.scene.control.ScrollPane?>
<?import javafx.geometry.Insets?>
<?import Core.AutoScalingStackPane?>
<?import javafx.scene.Group?>
<?import javafx.scene.layout.StackPane?>
<ScrollPane
        fitToWidth="true"
        styleClass="scrollPane"
        xmlns="http://javafx.com/javafx/null" xmlns:fx="http://javafx.com/fxml/1">
    <padding><Insets top="40" bottom="20" left="20" right="20" /></padding>
    <VBox alignment="CENTER" spacing="20"
          styleClass="vbox"
          style="-fx-font-family: Calibri; -fx-text-fill: #505050; -fx-font-size: 12pt;">

        <!-- =========== INFO SECTION ========== -->
        <TitledPane text="Info" expanded="false"
                    maxWidth="600"
                    style="-fx-font-size: 16pt;">
            <Label maxWidth="500" textAlignment="JUSTIFY" wrapText="true"
                   style="-fx-font-size: 13pt;">
                The following calculator works out either \( V_{in} \), \( R_1 \)$, \( R_2 \), or \( V_{out}\), given the other three parameters, using the resistive voltage divider equation:

                \( V_{out}=\frac{R_2}{R_1+R_2}V_{in} \)

                where:
                \( V_{in} \) = input voltage
                \( R_1 \) = resistance of resistor 1 (see diagram)
                \( R_2 \) = resistance of resistor 2 (see diagram)
                \( V_{out} \) = output voltage

                It is assumed that the output impedance on \( V_{out} \) is significantly higher than \( R_2 \) so that it doesn't matter (for example, \( V_{out} \) is connected to an op-amp input, analogue microcontroller input or similar).
                The quiescent current through the divider, \( I_q \), is also calculated, which can be useful to know when designing power-saving circuits. The equation to find \( I_q \) is:

                \( I_q = \frac{V_{in}}{R_1+R_2} \)
            </Label>
        </TitledPane>

        <!-- =========== CALCULATOR DIAGRAM AND VARIABLES ========== -->
        <StackPane>
            <padding><Insets top="20" bottom="20" left="20" right="20" /></padding>
            <AutoScalingStackPane minWidth="300" minHeight="300" maxWidth="800" maxHeight="800" alignment="CENTER">
            <Group>

                    <ImageView fitHeight="600.0" fitWidth="600.0"><image><Image url="@diagram.png" /></image></ImageView>

                    <TextField fx:id="vInValue" layoutX="14.0" layoutY="300.0" prefHeight="25" prefWidth="80" />
                    <RadioButton fx:id="vInIO" layoutX="94.0" layoutY="256.0" />
                    <ComboBox fx:id="vInUnits" layoutX="25.0" layoutY="336.0" prefHeight="25" />

                    <TextField fx:id="rTopValue" layoutX="300.0" layoutY="140.0" prefHeight="25" prefWidth="80" />
                    <RadioButton fx:id="rTopIO" layoutX="384.0" layoutY="99.0" />
                    <ComboBox fx:id="rTopUnits" layoutX="311.0" layoutY="179.0" prefHeight="25" />

                    <TextField fx:id="rBotValue" layoutX="318.0" layoutY="351.0" prefHeight="25" prefWidth="80" />
                    <RadioButton fx:id="rBotIO" layoutX="384.0" layoutY="315.0" />
                    <ComboBox fx:id="rBotUnits" layoutX="329.0" layoutY="391.0" prefHeight="25" />

                    <TextField fx:id="vOutValue" layoutX="473.0" layoutY="413.0" prefHeight="25" prefWidth="80" />
                    <RadioButton fx:id="vOutIO" layoutX="473.0" layoutY="370.0" />
                    <ComboBox fx:id="vOutUnits" layoutX="484.0" layoutY="450.0" prefHeight="25" />

                    <TextField fx:id="iQValue" layoutX="137.0" layoutY="450.0" prefHeight="25" prefWidth="80" />
                    <ComboBox fx:id="iQUnits" layoutX="148.0" layoutY="490.0" prefHeight="25" />

                </Group>
            </AutoScalingStackPane>
        </StackPane>
    </VBox>
</ScrollPane>
